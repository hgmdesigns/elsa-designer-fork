import{a as t,f as s,h as e}from"./p-94a66dfc.js";import{e as i}from"./p-2484a96d.js";import{S as n}from"./p-b514879f.js";import{e as r,s as o,p as a}from"./p-884c4b95.js";import{a as c}from"./p-db67fce4.js";const p=t=>!("isConnected"in t)||t.isConnected,l=(()=>{let t;return(...s)=>{t&&clearTimeout(t),t=setTimeout((()=>{t=0,(t=>{for(let s of t.keys())t.set(s,t.get(s).filter(p))})(...s)}),2e3)}})(),{state:y}=(()=>{const e=((t,s=((t,s)=>t!==s))=>{let e=new Map(Object.entries(null!=t?t:{}));const i={dispose:[],get:[],set:[],reset:[]},n=()=>{e=new Map(Object.entries(null!=t?t:{})),i.reset.forEach((t=>t()))},r=t=>(i.get.forEach((s=>s(t))),e.get(t)),o=(t,n)=>{const r=e.get(t);s(n,r,t)&&(e.set(t,n),i.set.forEach((s=>s(t,n,r))))},a="undefined"==typeof Proxy?{}:new Proxy(t,{get:(t,s)=>r(s),ownKeys:()=>Array.from(e.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(t,s)=>e.has(s),set:(t,s,e)=>(o(s,e),!0)}),c=(t,s)=>(i[t].push(s),()=>{((t,s)=>{const e=t.indexOf(s);e>=0&&(t[e]=t[t.length-1],t.length--)})(i[t],s)});return{state:a,get:r,set:o,on:c,onChange:(s,e)=>{const i=c("set",((t,i)=>{t===s&&e(i)})),n=c("reset",(()=>e(t[s])));return()=>{i(),n()}},use:(...t)=>t.forEach((t=>{t.set&&c("set",t.set),t.get&&c("get",t.get),t.reset&&c("reset",t.reset)})),dispose:()=>{i.dispose.forEach((t=>t())),n()},reset:n,forceUpdate:t=>{const s=e.get(t);i.set.forEach((e=>e(t,s,s)))}}})({activityDescriptors:[],workflowStorageDescriptors:[],monacoLibPath:""},void 0);return(({on:e})=>{const i=new Map;"function"==typeof t&&(e("dispose",(()=>{i.clear()})),e("get",(s=>{const e=t();e&&((t,s,e)=>{const i=t.get(s);i?i.includes(e)||i.push(e):t.set(s,[e])})(i,s,e)})),e("set",(t=>{const e=i.get(t);e&&i.set(t,e.filter(s)),l(i)})),e("reset",(()=>{i.forEach((t=>t.forEach(s))),l(i)})))})(e),e})(),u={ShowActivityPicker:"show-activity-picker",ShowWorkflowSettings:"show-workflow-settings",ActivityPicked:"activity-picked",ShowActivityEditor:"show-activity-editor",UpdateActivity:"update-activity",UpdateWorkflowSettings:"update-workflow-settings",WorkflowModelChanged:"workflow-model-changed",ActivityDesignDisplaying:"activity-design-displaying",ActivityDescriptorDisplaying:"activity-descriptor-displaying",WorkflowPublished:"workflow-published",WorkflowRetracted:"workflow-retracted",WorkflowImported:"workflow-imported"};class d{display(t,s){const i=r(t,s.name);return e("elsa-check-list-property",{propertyDescriptor:s,propertyModel:i})}update(t,s,e){}}class h{display(t,s){const i=r(t,s.name);return e("elsa-checkbox-property",{propertyDescriptor:s,propertyModel:i})}update(t,s,e){}}class g{display(t,s){const i=r(t,s.name),n=s.options||{},o=this.getEditorHeight(n);return e("elsa-script-property",{propertyDescriptor:s,propertyModel:i,"editor-height":o,syntax:n.syntax,context:n.context})}update(t,s,e){const i=e.get(s.name);o(t,s.name,i,"Literal")}getEditorHeight(t){switch(t.editorHeight||"Default"){case"Large":return"20em";case"Default":default:return"8em"}}}class w{display(t,s){const i=r(t,s.name);return e("elsa-dropdown-property",{propertyDescriptor:s,propertyModel:i})}update(t,s,e){}}class D{display(t,s){const i=r(t,s.name);return e("elsa-multi-text-property",{propertyDescriptor:s,propertyModel:i})}update(t,s,e){}}class f{display(t,s){const i=r(t,s.name);return e("elsa-multi-line-property",{propertyDescriptor:s,propertyModel:i})}update(t,s,e){}}class x{display(t,s){}update(t,s,e){}}class m{display(t,s){const i=r(t,s.name);return e("elsa-single-line-property",{propertyDescriptor:s,propertyModel:i})}update(t,s,e){}}class v{display(t,s){r(t,s.name)}update(t,s,e){}}class A{display(t,s){const i=r(t,s.name);return e("elsa-switch-cases-property",{propertyDescriptor:s,propertyModel:i})}update(t,s,e){}}const S=new class{constructor(){this.drivers={}}addDriver(t,s){this.drivers[t]=()=>s}display(t,s){return this.getDriver(s.uiHint).display(t,s)}update(t,s,e){return this.getDriver(s.uiHint).update(t,s,e)}getDriver(t){return(this.drivers[t]||(()=>new x))()}};var k,L;!function(t){t[t.Edit=0]="Edit",t[t.Instance=1]="Instance",t[t.Blueprint=2]="Blueprint"}(k||(k={})),function(t){t[t.Horizontal=0]="Horizontal",t[t.Vertical=1]="Vertical"}(L||(L={}));class b{constructor(){i.on(u.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const s=t.activityModel;if("If"!==s.type)return;const e=(s.properties||[]).find((t=>"Condition"==t.name))||{name:"Condition",expressions:{Literal:""},syntax:"Literal"},i=s.description;t.bodyDisplay=`<p>${i&&i.length>0?i:e.expressions[e.syntax]||""}</p>`}}class C{constructor(){i.on(u.ActivityDesignDisplaying,this.onActivityDisplaying)}onActivityDisplaying(t){const s=t.activityModel;if("HttpEndpoint"!==s.type)return;const e=(s.properties||[]).find((t=>"Path"==t.name))||{name:"Path",expressions:{Literal:"",syntax:n.Literal}};t.bodyDisplay=`<p>${e.expressions[e.syntax||n.Literal]}</p>`}}class M{constructor(){i.on(u.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const s=t.activityModel;if("Timer"!==s.type)return;const e=(s.properties||[]).find((t=>"Timeout"==t.name))||{name:"Timeout",expressions:{Literal:""},syntax:"Literal"};t.bodyDisplay=`<p>${e.expressions[e.syntax]||""}</p>`}}class P{constructor(){i.on(u.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const s=t.activityModel;if("WriteLine"!==s.type)return;const e=(s.properties||[]).find((t=>"Text"==t.name))||{name:"Text",expressions:{Literal:""},syntax:n.Literal};t.bodyDisplay=`<p>${e.expressions[e.syntax||"Literal"]||""}</p>`}}class T{constructor(){i.on(u.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const s=t.activityModel;if("SendEmail"!==s.type)return;const e=(s.properties||[]).find((t=>"To"==t.name))||{expressions:{Json:""},syntax:n.Json},i=s.description;t.bodyDisplay=`<p>To: ${i&&i.length>0?i:e.expressions[e.syntax||n.Json]||""}</p>`}}class ${display(t,s){const i=r(t,s.name);return e("elsa-radio-list-property",{propertyDescriptor:s,propertyModel:i})}update(t,s,e){}}class W{constructor(){this.addDriver("single-line",m),this.addDriver("multi-line",f),this.addDriver("check-list",d),this.addDriver("radio-list",$),this.addDriver("checkbox",h),this.addDriver("dropdown",w),this.addDriver("multi-text",D),this.addDriver("code-editor",g),this.addDriver("switch-case-builder",A),this.addDriver("timepicker",v)}addDriver(t,s){S.addDriver(t,new s)}}class E{constructor(){i.on(u.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const s=t.activityModel;if("Fork"!==s.type)return;const e=n.Json,i=((s.properties||[]).find((t=>"Branches"==t.name))||{expressions:{Json:"[]"},syntax:e}).expressions[e]||"[]";t.outcomes=i.$values?i.$values:a(i)||[]}}class j{constructor(){i.on(u.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const s=t.activityModel;if("RunJavaScript"!==s.type)return;const e=(s.properties||[]).find((t=>"PossibleOutcomes"==t.name))||{expressions:{Json:""},syntax:n.Json};t.outcomes=a(e.expressions[n.Json]||"[]")||["Done"],0==t.outcomes.length&&(t.outcomes=["Done"])}}class J{constructor(){i.on(u.ActivityDescriptorDisplaying,this.onActivityDescriptorDisplaying),i.on(u.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDescriptorDisplaying(t){const s=c.getIcon(t.activityDescriptor.type);s&&(t.activityIcon=s)}onActivityDesignDisplaying(t){const s=c.getIcon(t.activityModel.type);s&&(t.activityIcon=s)}}class I{constructor(){i.on(u.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const s=t.activityModel;if("Switch"!==s.type)return;const e=((s.properties||[]).find((t=>"Cases"==t.name))||{expressions:{Switch:""},syntax:"Switch"}).expressions.Switch||"[]",i=e.$values?e.$values:a(e)||[];t.outcomes=[...i.map((t=>t.name)),"Default"]}}class U{constructor(){i.on(u.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const s=t.activityModel;if("While"!==s.type)return;const e=(s.properties||[]).find((t=>"Condition"==t.name))||{name:"Condition",expressions:{Literal:""},syntax:"Literal"},i=s.description;t.bodyDisplay=`<p>${i&&i.length>0?i:e.expressions[e.syntax]||""}</p>`}}class H{constructor(){i.on(u.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const s=t.activityModel;if("StartAt"!==s.type)return;const e=(s.properties||[]).find((t=>"Instant"==t.name))||{name:"Instant",expressions:{Literal:""},syntax:"Literal"};t.bodyDisplay=`<p>${e.expressions[e.syntax]||""}</p>`}}class O{constructor(){i.on(u.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const s=t.activityModel;if("Cron"!==s.type)return;const e=(s.properties||[]).find((t=>"CronExpression"==t.name))||{name:"CronExpression",expressions:{Literal:""},syntax:"Literal"};t.bodyDisplay=`<p>${e.expressions[e.syntax]||""}</p>`}}class R{constructor(){i.on(u.ActivityDesignDisplaying,this.onActivityDisplaying)}onActivityDisplaying(t){const s=t.activityModel;if("SignalReceived"!==s.type)return;const e=(s.properties||[]).find((t=>"Signal"==t.name))||{name:"Signal",expressions:{Literal:"",syntax:n.Literal}};t.bodyDisplay=`<p>${e.expressions[e.syntax||n.Literal]}</p>`}}class z{constructor(){i.on(u.ActivityDesignDisplaying,this.onActivityDisplaying)}onActivityDisplaying(t){const s=t.activityModel;if("SendSignal"!==s.type)return;const e=(s.properties||[]).find((t=>"Signal"==t.name))||{name:"Signal",expressions:{Literal:"",syntax:n.Literal}};t.bodyDisplay=`<p>${e.expressions[e.syntax||n.Literal]}</p>`}}class B{constructor(){i.on(u.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const s=t.activityModel;if("UserTask"!==s.type)return;const e=n.Json,i=((s.properties||[]).find((t=>"Actions"==t.name))||{expressions:{Json:"[]"},syntax:e}).expressions[e]||"[]";t.outcomes=i.$values?i.$values:a(i)||[]}}class q{constructor(){i.on(u.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const s=t.activityModel;if("State"!==s.type)return;const e=s.properties||[],i=e.find((t=>"StateName"==t.name))||{name:"Text",expressions:{Literal:""},syntax:n.Literal};t.displayName=i.expressions[i.syntax||"Literal"]||"State";const r=n.Json,o=(e.find((t=>"Transitions"==t.name))||{expressions:{Json:"[]"},syntax:r}).expressions[r]||"[]";t.outcomes=o.$values?o.$values:a(o)||[]}}class F{constructor(){i.on(u.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const s=t.activityModel;if("SendHttpRequest"!==s.type)return;const e=n.Json,i=((s.properties||[]).find((t=>"SupportedStatusCodes"==t.name))||{expressions:{Json:"[]"},syntax:e}).expressions[e]||"[]";let r=i.$values?i.$values:a(i)||[];r=[...r,"Done","Unsupported Status Code"],t.outcomes=r}}class K{constructor(){i.on(u.ActivityDesignDisplaying,this.onActivityDisplaying)}onActivityDisplaying(t){const s=t.activityModel;if(!s.type.endsWith("Webhook"))return;const e=(s.properties||[]).find((t=>"Path"==t.name))||{name:"Path",expressions:{Literal:"",syntax:n.Literal}};t.bodyDisplay=`<p>${e.expressions[e.syntax||n.Literal]}</p>`}}const N=new class{constructor(){this.plugins=[],this.plugins=[new W,new J,new b,new U,new E,new I,new C,new F,new M,new H,new O,new R,new z,new P,new q,new j,new B,new T,new K]}initialize(){}};export{u as E,L,k as W,N as a,S as p,y as s}